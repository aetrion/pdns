# Autogenerated configuration file template
#################################
# aaaa-additional-processing	turn on to do AAAA additional processing (slow)
#
<%= "aaaa-additional-processing=#{node['pdns']['recursor']['aaaa-additional-processing']}" if node['pdns']['recursor']['aaaa-additional-processing'] %>

#################################
# allow-from	If set, only allow these comma separated netmasks to recurse
#
<%= "allow-from=#{node['pdns']['recursor']['allow-from'].join(', ')}" unless node['pdns']['recursor']['allow-from'].empty? %>

#################################
# allow-from-file	If set, load allowed netmasks from this file
#
<%= "allow-from-file=#{node['pdns']['recursor']['allow-from-file']}" if node['pdns']['recursor']['allow-from-file'] %>

#################################
# auth-can-lower-ttl	If we follow RFC 2181 to the letter, an authoritative server can lower the TTL of NS records
#
<%= "auth-can-lower-ttl=#{node['pdns']['recursor']['auth-can-lower-ttl']}" unless node['pdns']['recursor']['auth-can-lower-ttl'] %>

#################################
# auth-zones	Zones for which we have authoritative data, comma separated domain=file pairs 
#
<%= "auth-zones=#{node['pdns']['recursor']['auth-zones'].join(', ')}" unless node['pdns']['recursor']['auth-zones'].empty? %>

#################################
# chroot	switch to chroot jail
#
<%= "chroot=#{node['pdns']['recursor']['chroot']}" if node['pdns']['recursor']['chroot'] %>

#################################
# client-tcp-timeout	Timeout in seconds when talking to TCP clients
#
<%= "client-tcp-timeout=#{node['pdns']['recursor']['client-tcp-timeout']}" if node['pdns']['recursor']['client-tcp-timeout'] %>

#################################
# config-dir	Location of configuration directory (recursor.conf)
#
<%= "config-dir=#{node['pdns']['recursor']['config-dir']}" if node['pdns']['recursor']['config-dir'] %>

#################################
# daemon	Operate as a daemon
#
<%= "daemon=#{node['pdns']['recursor']['daemon']}" if node['pdns']['recursor']['daemon'] %>

#################################
# delegation-only	Which domains we only accept delegations from
#
<%= "delegation-only=#{node['pdns']['recursor']['delegation-only'].join(', ')}" unless node['pdns']['recursor']['delegation-only'].empty? %>

#################################
# dont-query	If set, do not query these netmasks for DNS data
#
# dont-query=127.0.0.0/8, 10.0.0.0/8, 192.168.0.0/16, 172.16.0.0/12, ::1/128, fe80::/10
<%= "dont-query=#{node['pdns']['recursor']['dont-query'].join(', ')}" unless node['pdns']['recursor']['dont-query'].empty? %>

#################################
# entropy-source	If set, read entropy from this file
#
<%= "entropy-source=#{node['pdns']['recursor']['entropy-source']}" if node['pdns']['recursor']['entropy-source'] %>

#################################
# export-etc-hosts	If we should serve up contents from /etc/hosts
#
<%= "export-etc-hosts=#{node['pdns']['recursor']['export-etc-hosts']}" if node['pdns']['recursor']['export-etc-hosts'] %>

#################################
# fork	If set, fork the daemon for possible double performance
#
<%= "fork=#{node['pdns']['recursor']['fork']}" if node['pdns']['recursor']['fork'] %>

#################################
# forward-zones	Zones for which we forward queries, comma separated domain=ip pairs
#
<%= "forward-zones=#{node['pdns']['recursor']['forward-zones'].join(', ')}" unless node['pdns']['recursor']['forward-zones'].empty? %>

#################################
# forward-zones-file	File with domain=ip pairs for forwarding
#
<%= "forward-zones-file=#{node['pdns']['recursor']['forward-zones-file']}" if node['pdns']['recursor']['forward-zones-file'] %>

#################################
# hint-file	If set, load root hints from this file
#
<%= "hint-file=#{node['pdns']['recursor']['hint-file']}" if node['pdns']['recursor']['hint-file'] %>

#################################
# ignore-rd-bit	Assume each packet requires recursion, for compatability
#
<%= "ignore-rd-bit=#{node['pdns']['recursor']['ignore-rd-bit']}" if node['pdns']['recursor']['ignore-rd-bit'] %>

#################################
# local-address	IP addresses to listen on, separated by spaces or commas. Also accepts ports.
#
<%= "local-address=#{node['pdns']['recursor']['local-address'].join(', ')}" unless node['pdns']['recursor']['local-address'].empty? %>

#################################
# local-port	port to listen on
#
<%= "local-port=#{node['pdns']['recursor']['local-port']}" if node['pdns']['recursor']['local-port'] %>

#################################
# log-common-errors	If we should log rather common errors
#
<%= "log-common-errors=#{node['pdns']['recursor']['log-common-errors']}" if node['pdns']['recursor']['log-common-errors'] %>

#################################
# logging-facility	Facility to log messages as. 0 corresponds to local0
#
<%= "logging-facility=#{node['pdns']['recursor']['logging-facility']}" if node['pdns']['recursor']['logging-facility'] %>

#################################
# max-cache-entries	If set, maximum number of entries in the main cache
#
<%= "max-cache-entries=#{node['pdns']['recursor']['max-cache-entries']}" if node['pdns']['recursor']['max-cache-entries'] %>

#################################
# max-negative-ttl	maximum number of seconds to keep a negative cached entry in memory
#
<%= "max-negative-ttl=#{node['pdns']['recursor']['max-negative-ttl']}" if node['pdns']['recursor']['max-negative-ttl'] %>

#################################
# max-tcp-clients	Maximum number of simultaneous TCP clients
#
<%= "max-tcp-clients=#{node['pdns']['recursor']['max-tcp-clients']}" if node['pdns']['recursor']['max-tcp-clients'] %>

#################################
# max-tcp-per-client	If set, maximum number of TCP sessions per client (IP address)
#
<%= "max-tcp-per-client=#{node['pdns']['recursor']['max-tcp-per-client']}" if node['pdns']['recursor']['max-tcp-per-client'] %>

#################################
# no-shuffle	Don't change
#
<%= "no-shuffle=#{node['pdns']['recursor']['no-shuffle']}" if node['pdns']['recursor']['no-shuffle'] %>

#################################
# query-local-address	Source IP address for sending queries
#
<%= "query-local-address=#{node['pdns']['recursor']['query-local-address']}" if node['pdns']['recursor']['query-local-address'] %>

#################################
# query-local-address6	Source IPv6 address for sending queries
#
<%= "query-local-address6=#{node['pdns']['recursor']['query-local-address6']}" if node['pdns']['recursor']['query-local-address6'] %>

#################################
# quiet	Suppress logging of questions and answers
#
<%= "quiet=#{node['pdns']['recursor']['quiet']}" if node['pdns']['recursor']['quiet'] %>

#################################
# remotes-ringbuffer-entries	maximum number of packets to store statistics for
#
<%= "remotes-ringbuffer-entries=#{node['pdns']['recursor']['remotes-ringbuffer-entries']}" if node['pdns']['recursor']['remotes-ringbuffer-entries'] %>

#################################
# serve-rfc1918	If we should be authoritative for RFC 1918 private IP space
#
<%= "serve-rfc1918=#{node['pdns']['recursor']['serve-rfc1918']}" if node['pdns']['recursor']['serve-rfc1918'] %>

#################################
# server-id	Returned when queried for 'id.server' TXT, defaults to hostname
#
<%= "server-id=#{node['pdns']['recursor']['server-id']}" if node['pdns']['recursor']['server-id'] %>

#################################
# setgid	If set, change group id to this gid for more security
#
<%= "setgid=#{node['pdns']['group']}" if node['pdns']['group'] %>

#################################
# setuid	If set, change user id to this uid for more security
#
<%= "setuid=#{node['pdns']['user']}" if node['pdns']['user'] %>

#################################
# single-socket	If set, only use a single socket for outgoing queries
#
<%= "single-socket=#{node['pdns']['recursor']['single-socket']}" if node['pdns']['recursor']['single-socket'] %>

#################################
# soa-minimum-ttl	Don't change
#
<%= "soa-minimum-ttl=#{node['pdns']['recursor']['soa-minimum-ttl']}" if node['pdns']['recursor']['soa-minimum-ttl'] %>

#################################
# soa-serial-offset	Don't change
#
<%= "soa-serial-offset=#{node['pdns']['recursor']['soa-serial-offset']}" if node['pdns']['recursor']['soa-serial-offset'] %>

#################################
# socket-dir	Where the controlsocket will live
# HINT: If you change this from the default /var/run then rec_control
#       will still search in /var/run for the socket file. Keep in mind
#       to run it as 'rec_control --socket-dir=/your/socket/directory' then.
#
<%= "socket-dir=#{node['pdns']['recursor']['socket-dir']}" if node['pdns']['recursor']['socket-dir'] %>

#################################
# spoof-nearmiss-max	If non-zero, assume spoofing after this many near misses
#
<%= "spoof-nearmiss-max=#{node['pdns']['recursor']['spoof-nearmiss-max']}" if node['pdns']['recursor']['spoof-nearmiss-max'] %>

#################################
# stack-size	stack size per mthread
#
<%= "stack-size=#{node['pdns']['recursor']['stack-size']}" if node['pdns']['recursor']['stack-size'] %>

#################################
# trace	if we should output heaps of logging
#
<%= "trace=#{node['pdns']['recursor']['trace']}" if node['pdns']['recursor']['trace'] %>

#################################
# version-string	string reported on version.pdns or version.bind
#
<%= "version-string=#{node['pdns']['recursor']['version-string']}" if node['pdns']['recursor']['version-string'] %>


